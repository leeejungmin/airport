{% extends 'base.html.twig' %}


{%  block body %}
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<div ng-app="leeApp">
{% verbatim %}

<div class="form-group " ng-controller="amischerchController" >

<div class="navbar navbar-default">

<div class="form-group has-feedback">
<span class="fa fa-search form-control-feedback">CHERCHE:</span>


<br /><br />
<input id="search" class="form-control" type="text" placeholder="Cherche amis" ng-model="searchText" />

</div>
</div>



  <hr>
  <li  ng-repeat= "vol in vols | filter: searchText">
  <p>Volnumero: [[vol.volnum]]</p>

  <p>Pilote: [[vol.pilotename]]</p>

  <p>Limit: [[vol.pasnum]] / 5</p>
  <hr>
  <div class="form-group">
  <button type="submit" class="btn btn-success" ng-click="Achat(userid,vol.id)" >Achet!</button>
  </div>

  </li>

  </div>

{% endverbatim %}

















<script>


var leeApp = angular.module('leeApp', ['ngRoute']);


leeApp.
  config([ '$routeProvider','$interpolateProvider', function($routeProvider, $interpolateProvider) {
  $interpolateProvider.startSymbol('[[');
  $interpolateProvider.endSymbol(']]');
}])


.controller('amischerchController',['$scope', '$http', function($scope, $http, $location){

  $scope.amis=[];

  $http.get("http://localhost:7000/api/volnum")
  .then(function (response)
    { console.log(response.data);
      $scope.vols = response.data;},
    function onError(reponse)
    { console.log("essayer jungmin encore");

    });

  // $scope.Achat=function(userid, volid){
  //         $scope.getuserid = sessionStorage.uid;
  //         $http({
  //           method:"POST",
  //           url:"http://localhost:7000/api/addpas",
  //           data: {piloteid, volid}
  //         }).then(function(reponse){
  //           // $scope.names = reponse.data;
  //           // $scope.alertClass = 'success';
  //           console.log(reponse.data);
  //
  //           $location.path('http://localhost:8000/vollist');
  //         },
  //         function onError(reponse)
  //         { console.log("essayer jungmin encore")
  //       });

  }]);





    </script>
{% endblock %}
</div>
